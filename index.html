<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Колесо Заданий</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            width: 100%;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff9966, #ff5e62);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0a0c0;
            margin-bottom: 20px;
        }
        
        .game-area {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            width: 100%;
        }
        
        .wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 0 10px #2d3047, 0 0 30px rgba(0, 0, 0, 0.8);
            transition: transform 5s cubic-bezier(0.2, 0.8, 0.3, 1);
        }
        
        .wheel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: conic-gradient(
                from 0deg,
                #ff9966 0deg 12deg,
                #ff5e62 12deg 24deg,
                #4ecdc4 24deg 36deg,
                #44a08d 36deg 48deg,
                #ff9966 48deg 60deg,
                #ff5e62 60deg 72deg,
                #4ecdc4 72deg 84deg,
                #44a08d 84deg 96deg,
                #ff9966 96deg 108deg,
                #ff5e62 108deg 120deg,
                #4ecdc4 120deg 132deg,
                #44a08d 132deg 144deg,
                #ff9966 144deg 156deg,
                #ff5e62 156deg 168deg,
                #4ecdc4 168deg 180deg,
                #44a08d 180deg 192deg,
                #ff9966 192deg 204deg,
                #ff5e62 204deg 216deg,
                #4ecdc4 216deg 228deg,
                #44a08d 228deg 240deg,
                #ff9966 240deg 252deg,
                #ff5e62 252deg 264deg,
                #4ecdc4 264deg 276deg,
                #44a08d 276deg 288deg,
                #ff9966 288deg 300deg,
                #ff5e62 300deg 312deg,
                #4ecdc4 312deg 324deg,
                #44a08d 324deg 336deg,
                #ff9966 336deg 348deg,
                #ff5e62 348deg 360deg
            );
            z-index: 1;
        }
        
        .wheel-center {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #2d3047;
            border-radius: 50%;
            z-index: 3;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            color: #ff9966;
            font-size: 1.5rem;
        }
        
        .pointer {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 60px;
            z-index: 10;
        }
        
        .pointer i {
            color: #ff5e62;
            font-size: 60px;
            filter: drop-shadow(0 0 5px rgba(255, 94, 98, 0.7));
        }
        
        .spin-button {
            background: linear-gradient(90deg, #ff9966, #ff5e62);
            color: white;
            border: none;
            padding: 18px 45px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 94, 98, 0.4);
            letter-spacing: 1px;
        }
        
        .spin-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 94, 98, 0.6);
        }
        
        .spin-button:active {
            transform: translateY(1px);
        }
        
        .spin-button:disabled {
            background: linear-gradient(90deg, #777, #999);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-container {
            flex: 1;
            min-width: 300px;
            background: rgba(45, 48, 71, 0.7);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .result-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #ff9966;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 153, 102, 0.3);
        }
        
        .task-display {
            background: rgba(30, 33, 58, 0.9);
            border-radius: 15px;
            padding: 25px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .task-text {
            font-size: 1.6rem;
            line-height: 1.4;
            color: #ffeb3b;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .task-number {
            font-size: 1.1rem;
            color: #4ecdc4;
            margin-top: 15px;
        }
        
        .history {
            margin-top: 20px;
        }
        
        .history-title {
            font-size: 1.3rem;
            color: #a0a0c0;
            margin-bottom: 10px;
        }
        
        .history-list {
            list-style-type: none;
            max-height: 150px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .history-list li {
            padding: 8px 12px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #ff9966;
        }
        
        .instructions {
            margin-top: 40px;
            background: rgba(45, 48, 71, 0.5);
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            max-width: 800px;
        }
        
        .instructions h3 {
            color: #4ecdc4;
            margin-bottom: 10px;
            font-size: 1.4rem;
        }
        
        .instructions p {
            line-height: 1.5;
            color: #c0c0e0;
        }
        
        .spinning {
            animation: pulse 0.8s infinite alternate;
        }
        
        @keyframes pulse {
            from { opacity: 0.7; }
            to { opacity: 1; }
        }
        
        .win-animation {
            animation: winEffect 1.5s ease-out;
        }
        
        @keyframes winEffect {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .counter {
            font-size: 1.1rem;
            color: #ff9966;
            margin-top: 15px;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
                align-items: center;
            }
            
            .wheel-container {
                width: 320px;
                height: 320px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-dice"></i> Колесо Заданий</h1>
            <p class="subtitle">Крутите колесо и выполняйте выпавшее задание! 30 уникальных испытаний</p>
        </header>
        
        <div class="game-area">
            <div class="wheel-container">
                <div class="wheel" id="wheel"></div>
                <div class="wheel-center">
                    <i class="fas fa-gem"></i>
                </div>
                <div class="pointer">
                    <i class="fas fa-caret-down"></i>
                </div>
            </div>
            
            <div class="result-container">
                <h2 class="result-title">Результат</h2>
                <div class="task-display" id="taskDisplay">
                    <div class="task-text">Нажмите "Крутить колесо" чтобы начать</div>
                    <div class="task-number">Задание #0</div>
                </div>
                
                <button class="spin-button" id="spinButton">
                    <i class="fas fa-redo-alt"></i> Крутить колесо
                </button>
                
                <div class="counter">Осталось заданий: <span id="tasksLeft">30</span></div>
                
                <div class="history">
                    <h3 class="history-title">Последние задания:</h3>
                    <ul class="history-list" id="historyList"></ul>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> Как играть:</h3>
            <p>1. Нажмите кнопку "Крутить колесо" для запуска рулетки.<br>
               2. Колесо начнет вращаться и через несколько секунд остановится на случайном задании.<br>
               3. Выполните задание, которое вам выпало!<br>
               4. Игра продолжается, пока не закончатся все задания или вы не решите остановиться.</p>
        </div>
    </div>

    <script>
        // Массив с заданиями
        const tasks = [
            "Прыгнуть в ледяной бассейн",
            "Выпить газировку головой вниз",
            "Подняться до горы без майки",
            "Признайся в любви любой девочки",
            "отдых",
            "Признайся в любви любой девочки",
            "отдых",
            "Выпить газировку вниз головой",
            "Не двигаться и разговаривать 15 минут",
            "Выпить газировку головой вниз",
            "Перемешать газировку и молоко и выпить залпом",
            "Перемешать газировку и молоко и выпить залпом",
            "Прыгнуть в ледяной бассейн",
            "отдых",
            "Прыгнуть в ледяной бассейн",
            "Выпить газировку головой вниз",
            "Найти пятерых для строение пирамиды",
            "ПРИЗ 200 СОМОН",
            "Каждые 30 минут делать 30 отжиманий",
            "Найти пятерых для строение пирамиды",
            "ПРИЗ 100 СОМОН",
            "Не двигаться и разговаривать 15 минут",
            "отдых",
            "Найти пятерых для строение пирамиды",
            "Прыгнуть в ледяной бассейн",
            "Рассказать очень стыдную историю",
            "Не двигаться и разговаривать 15 минут",
            "Подняться до горы без майки",
            "Прыгнуть в ледяной бассейн"
        ];

        // Элементы DOM
        const wheel = document.getElementById('wheel');
        const spinButton = document.getElementById('spinButton');
        const taskDisplay = document.getElementById('taskDisplay');
        const taskText = taskDisplay.querySelector('.task-text');
        const taskNumber = taskDisplay.querySelector('.task-number');
        const historyList = document.getElementById('historyList');
        const tasksLeftElement = document.getElementById('tasksLeft');

        // Переменные состояния
        let isSpinning = false;
        let currentRotation = 0;
        let usedTasks = new Set();
        let availableTasks = [...Array(tasks.length).keys()]; // индексы всех заданий
        let history = [];

        // Инициализация
        function init() {
            updateTasksLeft();
            spinButton.addEventListener('click', spinWheel);
        }

        // Функция вращения колеса
        function spinWheel() {
            if (isSpinning || availableTasks.length === 0) return;
            
            isSpinning = true;
            spinButton.disabled = true;
            spinButton.classList.add('spinning');
            
            // Выбираем случайное задание из еще не использованных
            const randomIndex = Math.floor(Math.random() * availableTasks.length);
            const selectedTaskIndex = availableTasks[randomIndex];
            const selectedTask = tasks[selectedTaskIndex];
            
            // Удаляем выбранное задание из доступных
            availableTasks.splice(randomIndex, 1);
            usedTasks.add(selectedTaskIndex);
            
            // Рассчитываем угол поворота для выбранного сектора
            // Каждый сектор = 12 градусов (360/30)
            const sectorAngle = 12;
            // Выбираем случайный угол в пределах сектора для естественности
            const offsetWithinSector = Math.random() * sectorAngle;
            // Полный угол поворота (несколько полных оборотов + угол до выбранного сектора)
            const fullRotations = 5; // Количество полных оборотов
            const targetAngle = fullRotations * 360 + (selectedTaskIndex * sectorAngle) + offsetWithinSector;
            
            // Применяем вращение
            wheel.style.transform = `rotate(${currentRotation + targetAngle}deg)`;
            currentRotation += targetAngle;
            
            // Ждем окончания вращения (5 секунд)
            setTimeout(() => {
                // Показываем результат
                showResult(selectedTaskIndex, selectedTask);
                isSpinning = false;
                spinButton.disabled = false;
                spinButton.classList.remove('spinning');
                
                // Обновляем счетчик оставшихся заданий
                updateTasksLeft();
                
                // Если задания закончились
                if (availableTasks.length === 0) {
                    spinButton.textContent = "Все задания выполнены!";
                    spinButton.disabled = true;
                }
            }, 5000);
        }

        // Функция отображения результата
        function showResult(taskIndex, task) {
            // Анимация появления результата
            taskDisplay.classList.remove('win-animation');
            void taskDisplay.offsetWidth; // Сброс анимации
            taskDisplay.classList.add('win-animation');
            
            // Обновляем текст задания
            taskText.textContent = task;
            taskNumber.textContent = `Задание #${taskIndex + 1}`;
            
            // Добавляем в историю
            addToHistory(taskIndex, task);
        }

        // Функция добавления задания в историю
        function addToHistory(taskIndex, task) {
            const historyItem = document.createElement('li');
            historyItem.innerHTML = `<strong>#${taskIndex + 1}</strong>: ${task}`;
            
            // Добавляем в начало списка
            historyList.prepend(historyItem);
            
            // Ограничиваем историю 5 последними заданиями
            if (historyList.children.length > 5) {
                historyList.removeChild(historyList.lastChild);
            }
            
            // Сохраняем в массиве истории
            history.unshift({index: taskIndex, task: task});
        }

        // Функция обновления счетчика оставшихся заданий
        function updateTasksLeft() {
            tasksLeftElement.textContent = availableTasks.length;
        }

        // Запуск приложения при загрузке страницы
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
